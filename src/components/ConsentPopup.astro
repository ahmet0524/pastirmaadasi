---
// src/components/ConsentPopup.astro
---

<div id="consent-popup" class="fixed inset-0 bg-black/50 z-50 flex items-end md:items-center justify-center p-4 hidden">
  <div class="bg-white rounded-t-3xl md:rounded-3xl max-w-2xl w-full p-6 md:p-8 shadow-2xl transform transition-all">
    <h2 class="text-2xl font-bold text-primary mb-4">🍪 Çerez Politikası</h2>
    <p class="text-gray-600 mb-6 leading-relaxed">
      Web sitemizde size en iyi deneyimi sunabilmek için çerezler kullanıyoruz. Sitemizi kullanmaya devam ederek çerez politikamızı kabul etmiş olursunuz.
    </p>
    <div class="flex flex-col sm:flex-row gap-3">
      <button
        id="accept-cookies"
        class="flex-1 bg-secondary hover:bg-primary text-gray-900 hover:text-white font-bold py-3 px-6 rounded-lg transition"
      >
        Kabul Et
      </button>
      <a
        href="/kullanim-kosullari"
        class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-6 rounded-lg transition text-center"
      >
        Detaylı Bilgi
      </a>
    </div>
  </div>
</div>

<script>
  function showConsentPopup() {
    const consent = localStorage.getItem('cookieConsent');
    if (!consent) {
      const popup = document.getElementById('consent-popup');
      if (popup) {
        setTimeout(() => {
          popup.classList.remove('hidden');
        }, 1000);
      }
    }
  }

  document.getElementById('accept-cookies')?.addEventListener('click', () => {
    localStorage.setItem('cookieConsent', 'accepted');
    const popup = document.getElementById('consent-popup');
    if (popup) popup.classList.add('hidden');
  });

  document.addEventListener('DOMContentLoaded', showConsentPopup);
</script>